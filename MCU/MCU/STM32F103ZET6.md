

	该文档的目的是对参考手册比较难以理解的地方进行说明，未提及的部分仍需查看参考手册
	STM32F103ZET6的基本参数：64KbSRAM,256KbFLASH,72M主频。

### 1. ADC

#### 1.1特性概览：

1. 规则通道共享一个数据寄存器。
2. 注入通道各有一个数据寄存器。
3. 只有ADC1和ADC3能产生DMA请求。
4. 第一次设置ADON位时，将ADC从断电状态唤醒，延迟一段时间后($t_{STAB}$)，再次设置ADON位时才会开始转换。
5. 如果ADC_SQRx或ADC_JSQR寄存器在转换期间被修改，则当前的转换被清除，一个新的启动脉冲将会被发送到ADC以转换新选择的组。
6. 可测量芯片内部的温度传感器（ADC1）。
7. 触发注入：11.3.9节，允许注入通道打断规则通道；
	如果在规则通道转换期间产生一外部注入触发，当前转换被复位，注入通道序列被以单次扫描方式进行转换，然后，恢复上次被中断的规则组通道转换，如果在注入转换期间发生一规则事件，注入转换不会被中止，但是规则序列将在注入序列结束后被执行。
8. 自动注入：不允注入通道打断规则通道，而是在规则通道完成转换后再进行注入通道的转换。
9. 间断模式和自动注入不能同时使用。
10. 校准：用于减小因内部电容器组的变化而造成的准精度误差。
11. 数据对齐：转换数据在寄存器中的排列位置。

#### 1.2工作模式：

##### 1.2.1基础工作模式：单ADC

1. 单次转换模式：

2. 连续转换模式：

3. 扫描模式： ADC多通道使用，如果不使能扫描模式，ADC只有一个通道能转换数据。

4. 间断模式：将n组通道按设置好的长度l分段转换。

##### 1.2.2复杂工作模式：双ADC

1. 同步注入模式：多个ADC的注入通道同步采样转换。
2. 同步规则模式：多个ADC的规则通道同步采样转换。
3. 快速交叉模式：ADC2立即启动并且ADC1在延迟7个ADC周期后启动。（只适用于规则组通道）
4. 慢速交叉模式：ADC2立即启动并且ADC1在延迟14个ADC周期后启动，再延迟14个周期后重复此过程。（只适用于规则组通道）
5. 交替触发模式：ADC1的外部触发第一次产生时转换ADC1上面的所有注入组通道，第二次产生后就是ADC2上的，如此循环。
6. 独立模式：每个ADC接口独立工作。
7. 同步注入+同步规则：
8. 同步规则+交替触发：
9. 同步注入+交替触发：
10. 交替触发+注入间断：

#### 1.3中断：

- 规则通道转换结束中断
- 注入通道转换结束中断
- 模拟看门狗中断：
	开启后，当被ADC转换的模拟电压低于低阈值或者高于高阈值时就会产生中断，其中低阈值的大小由`ADC_LTR`寄存器决定，高阈值的大小由`ADC_HTR`寄存器决定；

DMA请求：

#### 1.4使用注意：

1. 由于规则通道共享一个数据寄存器，需要有ADC_SQRx寄存器来指定各个通道进行转换的顺序，所以在转换完成中断中可以通过转换顺序分辨此时的数据寄存器上保存的是哪个通道上的数据。但由于最大时钟的限制，转化通道数越多，各个通道上的数据刷新周期就越长。
	```c
	/*使用扫描模式*/
	#define ADC_REGULAR_USED 7  /*假设使用了7个规则通道*/
	uint32_t g_AdcRegularChannelArrPoint = 0；/*用于指向当前使用的通道*/
	uint32_t g_AdcRegularChannelArr[ADC_REGULAR_USED] = {3,5,7,8,9,2,1}；/*第一个转换的通道为3，以此类推*/
	
	 void ADC_IRQHandler(void)
	 {
		 g_AdcRegularChannelArrPoint++;
	 }
	/* 可以将g_AdcRegularChannelArr的类型改为一个标准结构体类型*/
	typedef struct ADC_Channel{
	uint32_t Owner;                /*所属的通道*/
	uint32_t Data;                   /*转换出来的数据*/
	void(*CallBack)(void);      /*回调函数*/
	}ADC_RegularChannel;

### 2.FSMC
```

操作范围：共1GB

|      |        地址范围         | 存储器类型 |
| :--: | :---------------------: | :--------: |
|  1   | 0x6000 0000h~6FFF FFFFh | NOR/PSRAM  |
|  2   | 0x7000 0000h~7FFF FFFFh |  NAND闪存  |
|  3   | 0x8000 0000h~8FFF FFFFh |  NAND闪存  |
|  4   | 0x9000 0000h~9FFF FFFFh |    PC卡    |

